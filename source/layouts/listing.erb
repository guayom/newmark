<% wrap_layout :content do %>
<div class="property-detail">
  <h1><%= property.property_name %></h1>
  <p><%= property.short_address %></p>
  <h2 class="sales-price"><%= property.tipo_de_precio %> price: <strong>$<%= property.sales_price %><%= " por m<sup>2</sup>".html_safe if property.precio_por_metro_cuadrado == true %></strong></h2>
  <% unless property.attachment.nil? %>
    <a class="button" href="<%= property.attachment.file.to_url %>" target="_blank" download="<%= property.property_name %> - Property listing brochure">Download brochure</a>
  <% end %>

  <div class="listings-slider-container">
    <div class="listings-slider">
      <% property.images.each do |image| %>
        <%= image_tag image.image.file.width(320).to_url %>
      <% end %>
    </div>
  </div>
  <br/>

  <%= property.description %>

  <% unless property.location.nil? %>
    <h2>Location</h2>

    <div id="map"></div>
    <script>
      function initMap() {
        var uluru = {lat: <%= property.location.latitude %>, lng:<%= property.location.longitude %>};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 13,
          center: uluru,
          scrollwheel: false
        });
        var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGDf3NcaYQWd3qzdLd-qRgptU369jPQhk&callback=initMap">
    </script>
  <% end %>

  <% content_for(:sidebar) do %>
    <%= partial "partials/sidebar_regular", :locals => { :collection => 'property-listings', :title => "Property Listings" } %>
  <% end %>
</div>
<% end %>
